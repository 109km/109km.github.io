<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="I&apos;m walking on the road.">
<meta property="og:type" content="website">
<meta property="og:title" content="109km is a distance">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="109km is a distance">
<meta property="og:description" content="I&apos;m walking on the road.">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="109km is a distance">
<meta name="twitter:description" content="I&apos;m walking on the road.">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>109km is a distance</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">109km is a distance</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/29/css-selector-matching-theory/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="阿信">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/default_avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="109km is a distance">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/29/css-selector-matching-theory/" itemprop="url">css选择器匹配机制</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-29T00:00:00+08:00">
                2017-11-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/css/" itemprop="url" rel="index">
                    <span itemprop="name">css</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Keep in mind that when a browser is doing selector matching it has one element (the one it’s trying to determine style for) and all your rules and their selectors and it needs to find which rules match the element. This is different from the usual jQuery thing, say, where you only have one selector and you need to find all the elements that match that selector.</p>
<p>If you only had one selector and only one element to compare against that selector, then left-to-right makes more sense in some cases. But that’s decidedly not the browser’s situation. The browser is trying to render Gmail or whatever and has the one <span> it’s trying to style and the 10,000+ rules Gmail puts in its stylesheet (I’m not making that number up).</span></p>
<p>In particular, in the situation the browser is looking at most of the selectors it’s considering don’tmatch the element in question. So the problem becomes one of deciding that a selector doesn’t match as fast as possible; if that requires a bit of extra work in the cases that do match you still win due to all the work you save in the cases that don’t match.<br>If you start by just matching the rightmost part of the selector against your element, then chances are it won’t match and you’re done. If it does match, you have to do more work, but only proportional to your tree depth, which is not that big in most cases.</p>
<p>On the other hand, if you start by matching the leftmost part of the selector… what do you match it against? You have to start walking the DOM, looking for nodes that might match it. Just discovering that there’s nothing matching that leftmost part might take a while.</p>
<p>So browsers match from the right; it gives an obvious starting point and lets you get rid of most of the candidate selectors very quickly. You can see some data at <a href="http://groups.google.com/group/mozilla.dev.tech.layout/browse_thread/thread/b185e455a0b3562a/7db34de545c17665" target="_blank" rel="noopener">http://groups.google.com/group/mozilla.dev.tech.layout/browse_thread/thread/b185e455a0b3562a/7db34de545c17665</a> (though the notation is confusing), but the upshot is that for Gmail in particular two years ago, for 70% of the (rule, element) pairs you could decide that the rule does not match after just examining the tag/class/id parts of the rightmost selector for the rule. The corresponding number for Mozilla’s pageload performance test suite was 72%. So it’s really worth trying to get rid of those 2/3 of all rules as fast as you can and then only worry about matching the remaining 1/3.</p>
<p>Note also that there are other optimizations browsers already do to avoid even trying to match rules that definitely won’t match. For example, if the rightmost selector has an id and that id doesn’t match the element’s id, then there will be no attempt to match that selector against that element at all in Gecko: the set of “selectors with IDs” that are attempted comes from a hashtable lookup on the element’s ID. So this is 70% of the rules which have a pretty good chance of matching that stilldon’t match after considering just the tag/class/id of the rightmost selector.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/22/front-end-developing-standard/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="阿信">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/default_avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="109km is a distance">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/22/front-end-developing-standard/" itemprop="url">前端开发规范</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-22T16:47:12+08:00">
                2017-11-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端开发/" itemprop="url" rel="index">
                    <span itemprop="name">前端开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="开发篇"><a href="#开发篇" class="headerlink" title="开发篇"></a>开发篇</h2><h3 id="总则"><a href="#总则" class="headerlink" title="总则"></a>总则</h3><h4 id="缩进"><a href="#缩进" class="headerlink" title="缩进"></a>缩进</h4><p>统一采用2个空格，禁止使用4个空格或者<code>tab</code></p>
<h4 id="文件编码"><a href="#文件编码" class="headerlink" title="文件编码"></a>文件编码</h4><p>所有文件均使用<strong>UTF-8(无BOM)</strong>模式，如果不知道怎么调整，查找自己编辑器的编码模式。</p>
<h4 id="大小写"><a href="#大小写" class="headerlink" title="大小写"></a>大小写</h4><p>目录、文件名统一使用小写，多词使用 <code>-</code>进行连接。比如 <code>component-city</code></p>
<h4 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h4><p>对复杂的模块/功能添加注释，阐述其逻辑。不同语言的具体注释方法请参考其相应部分。</p>
<h4 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h4><p>良好的目录结构能提高开发效率，增强代码质量，保证多人协作的良好运行。<br>不同的项目可以有不同的目录结构，但大致应当遵循的规则如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Hello                               项目根目录，通常为项目名称</span><br><span class="line">├── README.md                       项目说明文档</span><br><span class="line">├── config                          配置目录</span><br><span class="line">│   ├── config.dev.js               dev环境配置</span><br><span class="line">│   ├── config.js                   本地环境配置</span><br><span class="line">│   └── config.production.js        线上环境配置</span><br><span class="line">├── dist                            部署后代码目录</span><br><span class="line">├── mock                            模拟数据目录</span><br><span class="line">│   └── mock.json                   模拟数据文件，根据需要可添加多个</span><br><span class="line">└── src                             源代码目录</span><br><span class="line">    ├── common                      全局通用代码目录，与业务相关</span><br><span class="line">    │   └── common.js</span><br><span class="line">    ├── components                  组件目录</span><br><span class="line">    │   └── swiper                  组件名称</span><br><span class="line">    │       ├── index.css</span><br><span class="line">    │       ├── index.html</span><br><span class="line">    │       └── index.js</span><br><span class="line">    ├── pages                       页面目录</span><br><span class="line">    │   └── index                   页面名称</span><br><span class="line">    │       ├── index.css</span><br><span class="line">    │       ├── index.html</span><br><span class="line">    │       └── index.js</span><br><span class="line">    ├── statics                     非业务相关静态文件</span><br><span class="line">    │   ├── css                     css目录</span><br><span class="line">    │   │   └── common.css</span><br><span class="line">    │   ├── image                   图片目录</span><br><span class="line">    │   │   └── logo.png</span><br><span class="line">    │   └── js                      js目录</span><br><span class="line">    │       └── common.js</span><br><span class="line">    └── utils                       公用方法目录</span><br><span class="line">        ├── array.js</span><br><span class="line">        └── fetch.js</span><br></pre></td></tr></table></figure>
<h3 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h3><h4 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h4><ul>
<li>自闭合标签：需要闭合，例如： <code>&lt;img src=&quot;&quot; /&gt;</code> <code>&lt;br /&gt;</code>等。</li>
<li>正常闭合标签：需要闭合，例如 <code>&lt;div&gt;&lt;/div&gt;</code>等。</li>
<li>标签嵌套：按嵌套规范进行，禁止出现 <code>&lt;span&gt;&lt;div&gt;&lt;/div&gt;&lt;/span&gt;</code> 或者 <code>&lt;p&gt;&lt;div&gt;&lt;/div&gt;&lt;/p&gt;</code>等类似情况。</li>
</ul>
<h4 id="语义化"><a href="#语义化" class="headerlink" title="语义化"></a>语义化</h4><ul>
<li>标签使用语义化标签。例如 <code>&lt;header&gt;&lt;/header&gt;</code>,<code>&lt;footer&gt;&lt;/footer&gt;</code></li>
<li>如果标签无法语义化，请在id，class命名时语义化。</li>
</ul>
<h4 id="class与id"><a href="#class与id" class="headerlink" title="class与id"></a>class与id</h4><ul>
<li>命名采用小写字母及<code>-</code>组成，例如：<code>icon-logo</code></li>
<li>命名尽量体现功能或者内容，例如：<code>popular-video-list</code>；尽量不要使用意义不明确的，例如：<code>round</code> <code>item</code></li>
<li>class命名可以采用多个class并列。例如<code>top-news-list border-radius font-color-red</code>。</li>
<li>如果class中有在js中使用的，请以<code>js-</code>开始。例如：<code>js-button-submit</code></li>
<li>class名称层级化。当前页面若比较复杂，需要大量的html，每一层级都要拥有自己的命名空间，作用是在对页面和css进行架构的时候可以清楚的区分出到底哪些属于整站共用或是当前页面共用，或是某一组件专属。比如：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"grid"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hot-section hot-news"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"nav nav-hot-news"</span>&gt;</span>热门新闻导航<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hot-section hot-classes"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"nav nav-hot-classes"</span>&gt;</span>热门课程导航<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="文档相关"><a href="#文档相关" class="headerlink" title="文档相关"></a>文档相关</h4><ul>
<li>使用 <code>&lt;!DOCTYPE html&gt;</code> 进行文档声明。</li>
<li>使用 <code>&lt;meta charset=&quot;utf-8&quot;&gt;</code> 指定页面字符编码。</li>
</ul>
<h3 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h3><h4 id="class与id-1"><a href="#class与id-1" class="headerlink" title="class与id"></a>class与id</h4><ul>
<li>保持与HTML中的命名方式一致。</li>
<li>尽量避免选择器，calss，id的叠加使用。比如：<code>ul#nav</code>。</li>
</ul>
<h4 id="书写格式"><a href="#书写格式" class="headerlink" title="书写格式"></a>书写格式</h4><ul>
<li>每一条css规则独占一行。示例如下：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">overflow</span>:hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>若多个选择器并列，则每一个选择器也独占一行，行尾用逗号分隔。示例如下：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span>,</span><br><span class="line"><span class="selector-tag">div</span>,</span><br><span class="line"><span class="selector-tag">th</span>,</span><br><span class="line"><span class="selector-tag">td</span>,</span><br><span class="line"><span class="selector-tag">form</span>&#123;</span><br><span class="line">  <span class="attribute">margin</span>:<span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>css相关属性排列在一起。示例如下：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>:block;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">margin</span>:<span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">position</span>:absolute:</span><br><span class="line">  top:<span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">left</span>:<span class="number">50px</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">text-align</span>:center;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">background-color</span>:<span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">opacity</span>:<span class="number">0.8</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h4><ul>
<li><p>css中消耗较高的属性：</p>
<ul>
<li>box-shadows</li>
<li>border-radius</li>
<li>transparency</li>
<li>transforms</li>
<li>CSS filters（性能杀手）</li>
</ul>
</li>
<li><p>float的使用：<br>float不仅会导致DOM脱离正常文档流，还消耗大量性能。</p>
</li>
<li><p>css选择器机制理解：<br>css选择器是<strong>从右向左</strong>进行，所以下面中的css选择器实际运行效率很低：</p>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#logo</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因为此时css会先查找所有<code>a</code>标签，然后查找哪些a标签的父祖级元素中有<code>#logo</code>，所以效率非常低下。推荐及不推荐写法展示如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 不推荐写法 */</span></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-id">#submit-button</span> &#123;&#125;</span><br><span class="line"><span class="selector-tag">li</span><span class="selector-class">.item</span> &#123;&#125;</span><br><span class="line"><span class="selector-tag">table</span> <span class="selector-tag">tr</span> <span class="selector-tag">td</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 推荐写法 */</span></span><br><span class="line"><span class="selector-id">#submit-button</span> &#123;&#125;</span><br><span class="line"><span class="selector-class">.item</span> &#123;&#125;</span><br><span class="line"><span class="selector-class">.td</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="流程篇"><a href="#流程篇" class="headerlink" title="流程篇"></a>流程篇</h2><h3 id="发布流程"><a href="#发布流程" class="headerlink" title="发布流程"></a>发布流程</h3><h4 id="预发布环境测试步骤"><a href="#预发布环境测试步骤" class="headerlink" title="预发布环境测试步骤"></a>预发布环境测试步骤</h4><ol>
<li>需求Review。与相关PM确认本次发布需求，列出所有待发布的产品功能点。</li>
<li>预发布代码分支准备。开发人员将开发分支合并到预发布分支，需要开发人员明确每一处改动的作用，保证所有合并代码是本次发布所需要。</li>
<li>预发布环境上线。开发人员将自己所负责代码发布到相应的预发布环境，保证预发布环境下的前端功能、接口调用、后端服务、数据库运行正常。</li>
<li>预发布环境检查。测试人员先确认预发布环境正常，比如：操作相关运营内容是在预发布环境，提防出现预发环境调用线上API或者操作线上数据库等情况出现等等。</li>
<li>预发布环境测试。测试人员在确保预发环境无误之后，开始进行测试。</li>
<li>制定上线步骤。预发布环境测试通过后，与开发人员及运营人员制定严格的上线步骤，上线阶段按此步骤进行。</li>
<li>输出文档。以上所有步骤落实到《发布说明书》。<a href="http://172.16.117.161:3000/documents/19" target="_blank" rel="noopener">查看示例</a></li>
</ol>
<h4 id="上线步骤"><a href="#上线步骤" class="headerlink" title="上线步骤"></a>上线步骤</h4><ol>
<li>按步骤执行《发布说明书-上线步骤》，每一步骤需要相应负责人确认，确认无误方可执行。全部步骤执行完毕之后，所有内容应已发布到线上环境。</li>
<li>在线上环境按步骤执行《发布说明书-上线后检查步骤》。</li>
<li>发布完毕。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/09/eact-lifecycle-02/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="阿信">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/default_avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="109km is a distance">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/09/eact-lifecycle-02/" itemprop="url">【React - 02】React Component生命周期详解</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-09T00:00:00+08:00">
                2017-11-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="为什么需要明白Component生命周期？"><a href="#为什么需要明白Component生命周期？" class="headerlink" title="为什么需要明白Component生命周期？"></a>为什么需要明白Component生命周期？</h3><hr>
<p>React Component生命周期是React的重要设计思想和概念之一。所以如果想更深入了解React的工作机制，更好的使用React进行实战，这里就是开始。</p>
<h3 id="Before-生命周期"><a href="#Before-生命周期" class="headerlink" title="Before 生命周期"></a>Before 生命周期</h3><hr>
<h4 id="Component设计思想"><a href="#Component设计思想" class="headerlink" title="Component设计思想"></a>Component设计思想</h4><p>Component是从<a href="https://zh.wikipedia.org/wiki/%E6%9C%89%E9%99%90%E7%8A%B6%E6%80%81%E6%9C%BA" target="_blank" rel="noopener">有限状态机（FSM）</a>的思想中衍生出来的一个模型。主要工作原理跟有限状态机几乎一样：通过状态、条件、动作来描述信息流转。</p>
<p>有限状态机的动作一般有下面几种：</p>
<ul>
<li>进入动作：在进入状态时进行</li>
<li>退出动作：在退出状态时进行</li>
<li>输入动作：依赖于当前状态和输入条件进行</li>
<li>转移动作：在进行特定转移时进行</li>
</ul>
<p>如下图（图片来自<a href="https://segmentfault.com/a/1190000003940416" target="_blank" rel="noopener">这里</a>），通过这个图可以清楚看到数据在每个节点不同状态时候形成了不同的转换，最终形成有限状态机。说的生动一点：想象数据是河水，然后我们设置关卡控制河水的流向，运动，停止。</p>
<p><img src="/images/fsm.jpeg" alt=""></p>
<p><br></p>
<h3 id="During-生命周期"><a href="#During-生命周期" class="headerlink" title="During 生命周期"></a>During 生命周期</h3><hr>
<h4 id="Component-Initialization"><a href="#Component-Initialization" class="headerlink" title="Component Initialization"></a>Component Initialization</h4><p>在这个阶段实例首次被创建，后面创建的实例会与第一次创建的实例在此阶段稍有不同。下面是这个阶段中会顺序执行的函数。</p>
<p><img src="/images/react-component-initialization.jpeg" alt=""></p>
<p><strong>getDefaultProps</strong></p>
<p>这个函数用于创建默认的props属性。返回值必须是 <code>Object</code> 或 <code>NULL</code>。由于这个函数比较特殊，只会在<code>React.createClass</code>第一次执行的时候调用一次，所以下面研究一下原因。</p>
<p>在创建Component的时候会调用<code>React.createClass</code>这个函数，这个函数实际的实现是在<code>ReactClass.createClass</code>里。我们看看这个函数里都执行了哪些操作：</p>
<ul>
<li><p>Constructor函数：这个Constructor中主要包含了初始化props获取initialState等功能，并没有任何与<code>getDefaultProps</code>有关的东西。第一次实例化后，再次调用<code>React.createClass</code>实际上执行的只有这个函数。</p>
</li>
<li><p>其他部分：在Component实例化过程中只会执行一次。下面的代码就在这个部分中，所以解释了为什么<code>getDefaultProps</code>只会执行一次。</p>
<pre><code>// Initialize the defaultProps property after all mixins have been merged.
if (Constructor.getDefaultProps) {
  Constructor.defaultProps = Constructor.getDefaultProps();
}
</code></pre></li>
</ul>
<p><br></p>
<blockquote>
<p>ps:更详细和具体的过程我也不清楚，希望有大神指导。</p>
</blockquote>
<p><strong>getInitialState</strong></p>
<p>这个函数用于创建Component的初始化state。返回值必须是 <code>Object</code> 或 <code>NULL</code>。</p>
<p>此函数会在每次Component创建的时候被调用。</p>
<p><strong>componentWillMount</strong></p>
<p>这个函数在Component每次被创建的阶段都会被调用，代表的意思是：组件即将创建。在server和client都会调用。</p>
<p><strong>render</strong></p>
<p>这个函数是进行Component渲染的，React会将Component输出到页面中。server和client都会触发。</p>
<p><strong>componentDidMount</strong></p>
<p>这个函数是在Component渲染完毕之后触发。只在客户端触发，server不会触发</p>
<p><br></p>
<h4 id="Component-Creating（创建）"><a href="#Component-Creating（创建）" class="headerlink" title="Component Creating（创建）"></a>Component Creating（创建）</h4><p>这个阶段是Component创建期，在这个阶段主要有以下几个方法会被触发。</p>
<ul>
<li>getInitialState</li>
<li>componentWillMount</li>
<li>render</li>
<li>componentDidMount</li>
</ul>
<p><br></p>
<h4 id="Component-Updating（更新）"><a href="#Component-Updating（更新）" class="headerlink" title="Component Updating（更新）"></a>Component Updating（更新）</h4><ul>
<li>componentWillReceiveProps</li>
<li>shouldComponentUpdate</li>
<li>componentWillUpdate</li>
<li>render</li>
<li>componentDidUpdate</li>
</ul>
<p><br></p>
<h4 id="Component-Unmouting（销毁）"><a href="#Component-Unmouting（销毁）" class="headerlink" title="Component Unmouting（销毁）"></a>Component Unmouting（销毁）</h4><ul>
<li>componentWillUnmount</li>
</ul>
<p><br></p>
<p>下面举个例子：</p>
<pre><code>var React = require(&apos;react/addons&apos;);
var LifeCycle = require(&apos;react-lifecycle&apos;);

var MyComponent = React.createClass({
  mixins: [LifeCycle],

  render: function(){
    console.log(&apos;render&apos;);
    return null;
  }
});

React.render(&lt;MyComponent /&gt;, document.body);  // 1
React.unmountComponentAtNode(document.body);   // 2
React.render(&lt;MyComponent /&gt;, document.body);  // 3
React.render(&lt;MyComponent /&gt;, document.body);  // 4
</code></pre><p>下面是输出：</p>
<pre><code>// 1
getDefaultProps
getInitialState
componentWillMount
render
componentDidMount
// 2
componentWillUnmount
// 3
getInitialState
componentWillMount
render
componentDidMount
// 4
componentWillReceiveProps
shouldComponentUpdate
componentWillUpdate
render
componentDidUpdate
</code></pre><p><br></p>
<p>参考链接：</p>
<p><a href="http://facebook.github.io/react/docs/component-specs.html" target="_blank" rel="noopener">http://facebook.github.io/react/docs/component-specs.html</a></p>
<p><a href="https://segmentfault.com/a/1190000003940416" target="_blank" rel="noopener">https://segmentfault.com/a/1190000003940416</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/06/what-is-react-01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="阿信">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/default_avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="109km is a distance">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/06/what-is-react-01/" itemprop="url">【React - 01】What’s React</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-06T15:47:12+08:00">
                2017-11-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="React初识"><a href="#React初识" class="headerlink" title="React初识"></a>React初识</h3><hr>
<p>React只是MVC中的V。</p>
<p>React核心是Component，Component是html / javascript的合集。</p>
<p><br></p>
<h3 id="React相关基础概念"><a href="#React相关基础概念" class="headerlink" title="React相关基础概念"></a>React相关基础概念</h3><hr>
<p><br></p>
<h4 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h4><p>在javascript中写HTML的语法工具。</p>
<p><br></p>
<h4 id="Virtual-DOM"><a href="#Virtual-DOM" class="headerlink" title="Virtual DOM"></a>Virtual DOM</h4><p>虚拟DOM。React自己生成的一套DOM系统，用于渲染真实的DOM。</p>
<p><br></p>
<h4 id="React-createClass"><a href="#React-createClass" class="headerlink" title="React.createClass"></a>React.createClass</h4><p>创建一个Component的方法。</p>
<p><br></p>
<h4 id="render-method"><a href="#render-method" class="headerlink" title="render(method)"></a>render(method)</h4><p>Component的HTML模板。</p>
<p><br></p>
<h4 id="React-render"><a href="#React-render" class="headerlink" title="React.render"></a>React.render</h4><p>渲染React Component到真实的DOM结点上。</p>
<p><br></p>
<h4 id="state"><a href="#state" class="headerlink" title="state"></a>state</h4><p>Component的状态，其实就是Component的内置数据，通过更改state属性，可以对实现对Component的更新。<br>例如，下面的代码里通过this.state.name控制Component中的内容展示。</p>
<pre><code>render: function() {
    return (
        &lt;header&gt;
        { this.state.name ?
            this.state.name :
            &lt;span&gt;Not Logged In&lt;/span&gt; }
        &lt;/header&gt;
    );
}
</code></pre><p><br></p>
<h4 id="getInitialState"><a href="#getInitialState" class="headerlink" title="getInitialState"></a>getInitialState</h4><p>获取Component的初始化state。</p>
<p><br></p>
<h4 id="setState"><a href="#setState" class="headerlink" title="setState"></a>setState</h4><p>设置Component的state属性。</p>
<p><br></p>
<h4 id="props"><a href="#props" class="headerlink" title="props"></a>props</h4><p>父级Component传递给子级Component的属性。比如onClick也是props的一种。在下面这个例子中父级节点 <hellouser> 传递了 name=“Tyler” 给子节点 <div></div></hellouser></p>
<pre><code>var HelloUser = React.createClass({
  render: function(){
    return (
      &lt;div&gt; Hello, {this.props.name}&lt;/div&gt;
    )
  }
});

React.render(&lt;HelloUser name=&quot;Tyler&quot;/&gt;, document.getElementById(&apos;app&apos;));
</code></pre><p><br></p>
<h4 id="setProps"><a href="#setProps" class="headerlink" title="setProps"></a>setProps</h4><p>设置props属性。需要注意的是这个函数只能在父级节点设置子级节点的props，不能调用 this.setProps，或者直接修改this.props，这是一个只读属性。</p>
<p><br></p>
<h4 id="propTypes"><a href="#propTypes" class="headerlink" title="propTypes"></a>propTypes</h4><p>用于控制props属性的数据类型。通过这个属性可以很好的描述组件的API。</p>
<p><br></p>
<h4 id="getDefaultProps"><a href="#getDefaultProps" class="headerlink" title="getDefaultProps"></a>getDefaultProps</h4><p>获取默认的props属性的值。这个函数是不是在组件实例化的时候调用的，而是在React.createClass时调用的，所以无法在这个函数中使用特定的实例数据。</p>
<p><br></p>
<h4 id="Component-LifeCycle"><a href="#Component-LifeCycle" class="headerlink" title="Component LifeCycle"></a>Component LifeCycle</h4><p>这里列出的是跟Component生命周期相关的方法，不是完整的Component生命周期。</p>
<ul>
<li>componentWillMount——Component创建之前触发</li>
<li>componentDidMount——Component创建之后触发</li>
<li>componentWillReceiveProps——Component的props属性变化的时候触发</li>
<li>componentWillUnmount——Component销毁之前触发</li>
</ul>
<p><br></p>
<h4 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h4><ul>
<li>onClick</li>
<li>onSubmit</li>
<li>onChange</li>
</ul>
<p><br></p>
<h3 id="React生命周期"><a href="#React生命周期" class="headerlink" title="React生命周期"></a>React生命周期</h3><hr>
<h4 id="实例化-Initializing"><a href="#实例化-Initializing" class="headerlink" title="实例化(Initializing)"></a>实例化(Initializing)</h4><p>一个组件类首次实例化的时候，会依次调用下面的方法：</p>
<ul>
<li>getDefaultProps</li>
<li>getInitialState</li>
<li>componentWillMount</li>
<li>render</li>
<li>componentDidMount</li>
</ul>
<p>对于该组件类的所有后续应用，下面的方法会被依次调用：</p>
<ul>
<li>getInitialState</li>
<li>componentWillMount</li>
<li>render</li>
<li>componentDidMount</li>
</ul>
<p>可以看到，此时已经不再调用getDefaultProps。</p>
<p><br></p>
<h4 id="存在期-Updating"><a href="#存在期-Updating" class="headerlink" title="存在期(Updating)"></a>存在期(Updating)</h4><p>当组件在使用过程中，组件的状态会发生变化，会触发不同的方法：</p>
<ul>
<li>componentWillReceiveProps</li>
<li>shouldComponentUpdate</li>
<li>componentWillUpdate</li>
<li>render</li>
<li>componentDidUpdate</li>
</ul>
<p><br></p>
<h4 id="销毁期-Unmounting"><a href="#销毁期-Unmounting" class="headerlink" title="销毁期(Unmounting)"></a>销毁期(Unmounting)</h4><ul>
<li>componentWillMount</li>
</ul>
<p><br><br><br><br>参考链接：</p>
<p><a href="http://tylermcginnis.com/reactjs-tutorial-a-comprehensive-guide-to-building-apps-with-react/" target="_blank" rel="noopener">http://tylermcginnis.com/reactjs-tutorial-a-comprehensive-guide-to-building-apps-with-react/</a></p>
<p><a href="http://blog.andrewray.me/reactjs-for-stupid-people/" target="_blank" rel="noopener">http://blog.andrewray.me/reactjs-for-stupid-people/</a></p>
<p><a href="http://busypeoples.github.io/post/react-component-lifecycle/" target="_blank" rel="noopener">http://busypeoples.github.io/post/react-component-lifecycle/</a></p>
<p><a href="http://www.ruanyifeng.com/blog/2015/03/react.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2015/03/react.html</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/default_avatar.png"
                alt="阿信" />
            
              <p class="site-author-name" itemprop="name">阿信</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">阿信</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
